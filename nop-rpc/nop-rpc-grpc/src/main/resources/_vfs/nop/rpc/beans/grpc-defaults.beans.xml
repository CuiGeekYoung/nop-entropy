<?xml version="1.0" encoding="UTF-8" ?>

<beans x:schema="/nop/schema/beans.xdef" xmlns:x="/nop/schema/xdsl.xdef"
       xmlns:ioc="ioc" xmlns:feature="feature"
       xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <bean id="nopGrpcAutoRegistration" class="io.nop.cluster.naming.AutoRegistration"
          feature:on="nop.cluster.registration.enabled" parent="nopAutoRegistration">
        <property name="port" value="@cfg:nop.server.grpc-port"/>
    </bean>

    <bean id="nopGrpcServer" class="io.nop.rpc.grpc.server.GrpcServer">
        <property name="config" ref="nopGrpcServerConfig"/>
    </bean>

    <bean id="nopGrpcStatusMapping" class="io.nop.rpc.grpc.status.GrpcStatusMapping"/>

    <ioc:config id="nopGrpcServerConfig" class="io.nop.rpc.grpc.server.GrpcServerConfig"
                ioc:config-prefix="nop.grpc.server">
        <property name="port" value="@cfg:nop.server.grpc-port"/>
    </ioc:config>

</beans>